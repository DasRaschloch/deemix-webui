<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title>deemix</title>
		<link rel="stylesheet" type="text/css" href="/public/css/progressbar.css">
		<link rel="stylesheet" type="text/css" href="/public/css/vendor/animate.css">
		<link rel="stylesheet" type="text/css" href="/public/css/vendor/toastify.css">
		<link rel="stylesheet" type="text/css" href="/public/css/vendor/material-icons.css"/>
		<link rel="stylesheet" type="text/css" href="/public/css/vendor/OpenSans.css"/>
		<link rel="stylesheet" type="text/css" href="/public/css/style.css">
		<!-- <link rel="stylesheet" type="text/css" href="/public/css/darkMode.css" name="darkMode" disabled/> -->
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0">
		<!-- imho not needed -->
		<!-- <script type='text/javascript'>
			if (eval(localStorage.darkMode)){
				document.getElementsByName("darkMode")[0].removeAttribute("disabled");
			}
		</script> -->
	</head>
	<body>
		<aside id="sidebar">
			<i class="material-icons side_icon">menu</i>
			<i onclick="changeTab(event, 'main', 'search_tab')" id="main_search_tablink" class="main_tablinks"></i>
			<i onclick="changeTab(event, 'main', 'home_tab')" id="main_home_tablink" class="material-icons side_icon main_tablinks">home</i>
			<i onclick="changeTab(event, 'main', 'charts_tab')" id="main_charts_tablink" class="material-icons side_icon main_tablinks">bubble_chart</i>
			<i onclick="changeTab(event, 'main', 'favorites_tab')" id="main_favorites_tablink" class="material-icons side_icon main_tablinks">album</i>
			<i onclick="changeTab(event, 'main', 'analyzer_tab')" id="main_analyzer_tablink" class="material-icons side_icon main_tablinks">link</i>
			<i onclick="changeTab(event, 'main', 'settings_tab')" id="main_settings_tablink" class="material-icons side_icon main_tablinks">settings</i>
			<i onclick="changeTab(event, 'main', 'about_tab')" id="main_about_tablink" class="material-icons side_icon main_tablinks">info</i>
		</aside>
		<main id="main_content">
			<div id="middle_section">
				<header id="search"><input id="searchbar" type="text" name="searchbar" value="" placeholder="Search..."></header>
				<section id="content"><div id="container">

					<div id="search_tab" class="main_tabcontent">
						<div class="tab">
							<button class="search_tablinks" id="search_all_tab" onclick="changeTab(event, 'search', 'main_search')">All</button>
							<button class="search_tablinks" id="search_track_tab" onclick="changeTab(event, 'search', 'track_search')">Tracks</button>
							<button class="search_tablinks" id="search_album_tab" onclick="changeTab(event, 'search', 'album_search')">Album</button>
							<button class="search_tablinks" id="search_artist_tab" onclick="changeTab(event, 'search', 'artist_search')">Artist</button>
							<button class="search_tablinks" id="search_playlist_tab" onclick="changeTab(event, 'search', 'playlist_search')">Playlist</button>
						</div>
						<div id="search_tab_content">
							<!-- ### Main Search Tab ### -->
							<div id="main_search" class="search_tabcontent">
								<template v-for="section in results.ORDER">
									<div v-if="(section != 'TOP_RESULT' && results[section].data.length > 0) || (results[section].length > 0)" class="search_section">
										<h1 v-on:click="changeSearchTab(section)">{{ names[section] }}</h1>
										<!-- Top result -->
										<div v-if="section == 'TOP_RESULT'" class="top_result">
											<div class="cover_container">
												<img v-bind:src="(results.TOP_RESULT[0].__TYPE__ == 'artist' ? 'https://e-cdns-images.dzcdn.net/images/artist/' + results.TOP_RESULT[0].ART_PICTURE : results.TOP_RESULT[0].__TYPE__ == 'album' ? 'https://e-cdns-images.dzcdn.net/images/cover/' + results.TOP_RESULT[0].ALB_PICTURE : results.TOP_RESULT[0].__TYPE__ == 'playlist' ? 'https://e-cdns-images.dzcdn.net/images/'+ results.TOP_RESULT[0].PICTURE_TYPE +'/' + results.TOP_RESULT[0].PLAYLIST_PICTURE :'https://e-cdns-images.dzcdn.net/images/cover/') + '/156x156-000000-80-0-0.jpg'"
													v-bind:class="(results.TOP_RESULT[0].__TYPE__ == 'artist' ? 'circle' : 'rounded') + ' coverart'"></img>
													<div v-on:click="addToQueue('https://deezer.com/'+results.TOP_RESULT[0].__TYPE__+'/'+(results.TOP_RESULT[0].__TYPE__ == 'artist' ? results.TOP_RESULT[0].ART_ID : results.TOP_RESULT[0].__TYPE__ == 'album' ? results.TOP_RESULT[0].ALB_ID : results.TOP_RESULT[0].__TYPE__ == 'playlist' ? results.TOP_RESULT[0].PLAYLIST_ID : ''))" class="download_overlay"><i class="material-icons">get_app</i></div>
											</div>
											<div class="info_box">
												<p class="primary-text">{{ results.TOP_RESULT[0].__TYPE__ == 'artist' ? results.TOP_RESULT[0].ART_NAME : results.TOP_RESULT[0].__TYPE__ == 'album' ? results.TOP_RESULT[0].ALB_TITLE : results.TOP_RESULT[0].__TYPE__ == 'playlist' ? results.TOP_RESULT[0].TITLE : '' }}</p>
												<p class="secondary-text">{{ results.TOP_RESULT[0].__TYPE__ == 'artist' ? numberWithDots(results.TOP_RESULT[0].NB_FAN) + ' fans' : results.TOP_RESULT[0].__TYPE__ == 'album' ? 'by '+results.TOP_RESULT[0].ART_NAME+' - '+results.TOP_RESULT[0].NUMBER_TRACK+' tracks' : results.TOP_RESULT[0].__TYPE__ == 'playlist' ? 'by '+results.TOP_RESULT[0].PARENT_USERNAME+' - '+results.TOP_RESULT[0].NB_SONG+' tracks' : '' }}</p>
												<span class="tag">{{ results.TOP_RESULT[0].__TYPE__.charAt(0).toUpperCase() + results.TOP_RESULT[0].__TYPE__.substring(1)}}</span>
											</div>
										</div>
										<div v-if="section == 'TRACK'">
											<table class="tracks_table">
												<tr v-for="track in results.TRACK.data.slice(0, 6)" class="track_row">
													<td style="width: 48px; text-align: center;"><img class="rounded coverart" v-bind:src="'https://e-cdns-images.dzcdn.net/images/cover/'+track.ALB_PICTURE+'/32x32-000000-80-0-0.jpg'"></td>
													<td class="breakline">{{track.SNG_TITLE + (track.VERSION ? ' '+track.VERSION : '')}}</td>
													<td class="breakline"><span v-for="artist in track.ARTISTS">{{artist.ART_NAME}} </span></td>
													<td class="breakline">{{track.ALB_TITLE}}</td>
													<td>{{convertDuration(track.DURATION)}}</td>
													<td v-on:click="addToQueue('https://www.deezer.com/track/'+track.SNG_ID)" style="width: 56px; text-align: center;" class="clickable"><i class="material-icons">get_app</i></td>
												</tr>
											</table>
										</div>
										<div v-if="section != 'TRACK' && section != 'TOP_RESULT'" class="release_grid firstrow_only">
											<div v-for="release in results[section].data.slice(0, 10)" class="release">
												<div class="cover_container">
													<img v-bind:class="(section == 'ARTIST' ? 'circle' : 'rounded') + ' coverart'" v-bind:src="(section == 'ARTIST' ? 'https://e-cdns-images.dzcdn.net/images/artist/' + release.ART_PICTURE : section == 'ALBUM' ? 'https://e-cdns-images.dzcdn.net/images/cover/' + release.ALB_PICTURE : section == 'PLAYLIST' ? 'https://e-cdns-images.dzcdn.net/images/'+ release.PICTURE_TYPE +'/' + release.PLAYLIST_PICTURE : 'https://e-cdns-images.dzcdn.net/images/cover/' ) + '/156x156-000000-80-0-0.jpg'">
													<div v-on:click="addToQueue('https://deezer.com/'+(section == 'ARTIST' ? 'artist/'+release.ART_ID : section == 'ALBUM' ? 'album/'+release.ALB_ID : section == 'PLAYLIST' ? 'playlist/'+release.PLAYLIST_ID : ''))" class="download_overlay"><i class="material-icons">get_app</i></div>
												</div>
												<p class="primary-text">{{ section == 'ARTIST' ? release.ART_NAME : section == 'ALBUM' ? release.ALB_TITLE : section == 'PLAYLIST' ? release.TITLE : '' }}</p>
												<p class="secondary-text">{{ section == 'ARTIST' ? numberWithDots(release.NB_FAN) + ' fans' : section == 'ALBUM' ? release.ART_NAME+' - '+release.NUMBER_TRACK+' tracks' : section == 'PLAYLIST' ? release.NB_SONG+' tracks' : '' }}</p>
											</div>
										</div>
									</div>
								</template>
								<div v-if="results.ORDER.every(section => section == 'TOP_RESULT' ? results[section].length == 0 : results[section].data.length == 0)">
									<h1>No results</h1>
								</div>
							</div>
							<!-- ### Track Search Tab ### -->
							<div id="track_search" class="search_tabcontent">
								<div v-if="results.data.length == 0">
									<h1>No Tracks found</h1>
								</div>
								<table class="tracks_table" v-if="results.data.length > 0">
									<tr>
										<th style="width: 48px;"></th>
										<th>Title</th>
										<th>Artists</th>
										<th>Album</th>
										<th><i class="material-icons">timer</i></th>
										<th style="width: 56px;"></th>
									</tr>
									<tr v-for="track in results.data" class="track_row">
										<td style="width: 48px; text-align: center;"><img class="rounded coverart" v-bind:src="'https://e-cdns-images.dzcdn.net/images/cover/'+track.ALB_PICTURE+'/32x32-000000-80-0-0.jpg'"></td>
										<td class="breakline">{{track.SNG_TITLE + (track.VERSION ? ' '+track.VERSION : '')}}</td>
										<td class="breakline"><span v-for="artist in track.ARTISTS">{{artist.ART_NAME}} </span></td>
										<td class="breakline">{{track.ALB_TITLE}}</td>
										<td>{{convertDuration(track.DURATION)}}</td>
										<td v-on:click="addToQueue('https://www.deezer.com/track/'+track.SNG_ID)" style="width: 56px; text-align: center;" class="clickable"><i class="material-icons">get_app</i></td>
									</tr>
								</table>
							</div>
							<!-- ### Album Search Tab ### -->
							<div id="album_search" class="search_tabcontent">
								<div v-if="results.data.length == 0">
									<h1>No Albums found</h1>
								</div>
								<div class="release_grid" v-if="results.data.length > 0">
									<div v-for="release in results.data" class="release">
										<div class="cover_container">
											<img class="rounded coverart" v-bind:src="'https://e-cdns-images.dzcdn.net/images/cover/' + release.ALB_PICTURE + '/156x156-000000-80-0-0.jpg'">
											<div v-on:click="addToQueue('https://www.deezer.com/album/'+release.ALB_ID)" class="download_overlay"><i class="material-icons">get_app</i></div>
										</div>
										<p class="primary-text">{{ release.ALB_TITLE }}</p>
										<p class="secondary-text">{{ 'by '+release.ART_NAME }}</p>
									</div>
								</div>
							</div>
							<!-- ### Artist Search Tab ### -->
							<div id="artist_search" class="search_tabcontent">
								<div v-if="results.data.length == 0">
									<h1>No Artists found</h1>
								</div>
								<div class="release_grid" v-if="results.data.length > 0">
									<div v-for="release in results.data" class="release">
										<div class="cover_container">
											<img class="circle coverart" v-bind:src="'https://e-cdns-images.dzcdn.net/images/artist/' + release.ART_PICTURE + '/156x156-000000-80-0-0.jpg'">
											<div v-on:click="addToQueue('https://www.deezer.com/artist/'+release.ART_ID)" class="download_overlay"><i class="material-icons">get_app</i></div>
										</div>
										<p class="primary-text">{{ release.ART_NAME }}</p>
										<p class="secondary-text">{{ numberWithDots(release.NB_FAN) + ' fans' }}</p>
									</div>
								</div>
							</div>
							<!-- ### Playlist Search Tab ### -->
							<div id="playlist_search" class="search_tabcontent">
								<div v-if="results.data.length == 0">
									<h1>No Playlists found</h1>
								</div>
								<div class="release_grid" v-if="results.data.length > 0">
									<div v-for="release in results.data" class="release">
										<div class="cover_container">
											<img class="rounded coverart" v-bind:src="'https://e-cdns-images.dzcdn.net/images/'+ release.PICTURE_TYPE +'/' + release.PLAYLIST_PICTURE + '/156x156-000000-80-0-0.jpg'">
											<div v-on:click="addToQueue('https://www.deezer.com/playlist/'+release.PLAYLIST_ID)" class="download_overlay"><i class="material-icons">get_app</i></div>
										</div>
										<p class="primary-text">{{ release.TITLE }}</p>
										<p class="secondary-text">{{ release.NB_SONG+' tracks' }}</p>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div id="home_tab" class="main_tabcontent">
						<h1>Home</h1>
					</div>

					<div id="charts_tab" class="main_tabcontent"><h1>Charts</h1></div>

					<div id="favorites_tab" class="main_tabcontent"><h1>Favorites</h1></div>

					<div id="analyzer_tab" class="main_tabcontent"><h1>Link Analyzer</h1></div>

					<div id="settings_tab" class="main_tabcontent fixed_footer">
						<h1>Settings</h1>
						<div id="logged_in_info">
							<img id="settings_picture" src="" alt="Profile Picture" class="circle" style="width: 125px;height:125px; margin-right: 12px;"/>
							<p>You are logged in as <b id="settings_username"></b></p>
							<button onclick="logout()" id="settings_btn_logout">Logout</button>
						</div>
						<div class="inline-flex">
							<input autocomplete="off" type="password" id="login_input_arl" placeholder="ARL"/>
							<button onclick="copyARLtoClipboard()" id="settings_btn_copyArl"><i class="material-icons">assignment</i></button>
						</div>
						<p><a href="https://notabug.org/RemixDevs/DeezloaderRemix/wiki/Login+via+userToken" target="_blank">How do I get my own ARL?</a></p>
						<p><button onclick="loginButton()" style="width:100%;" id="settings_btn_updateArl">Update ARL</button></p>
						<div id="settings_generic_tab">
							<div class="input_group">
								<p>Download Path</p>
								<input type="text" v-model="settings.downloadLocation">
							</div>
							<div class="input_group">
								<p>Trackname template</p>
								<input type="text" v-model="settings.tracknameTemplate">
							</div>
							<div class="input_group">
								<p>Album track template</p>
								<input type="text" v-model="settings.albumTracknameTemplate">
							</div>
							<div class="input_group">
								<p>Playlist track template</p>
								<input type="text" v-model="settings.playlistTracknameTemplate">
							</div>
							<div class="input_group">
								<p>Create folder for playlist</p>
								<input type="checkbox" v-model="settings.createPlaylistFolder">
							</div>
							<div class="input_group" v-if="settings.createPlaylistFolder">
								<p>Playlist folder template</p>
								<input type="text" v-model="settings.playlistNameTemplate">
							</div>
							<div class="input_group">
								<p>Create folder for artist</p>
								<input type="checkbox" v-model="settings.createArtistFolder">
							</div>
							<div class="input_group" v-if="settings.createArtistFolder">
								<p>Artist folder template</p>
								<input type="text" v-model="settings.artistNameTemplate">
							</div>
							<div class="input_group">
								<p>Create folder for album</p>
								<input type="checkbox" v-model="settings.createAlbumFolder">
							</div>
							<div class="input_group" v-if="settings.createAlbumFolder">
								<p>Album folder template</p>
								<input type="text" v-model="settings.albumNameTemplate">
							</div>
							<div class="input_group">
								<p>Create folder for CDs</p>
								<input type="checkbox" v-model="settings.createCDFolder">
							</div>
							<div class="input_group">
								<p>Create folder structure for playlists</p>
								<input type="checkbox" v-model="settings.createStructurePlaylist">
							</div>
							<div class="input_group">
								<p>Create folder structure for singles</p>
								<input type="checkbox" v-model="settings.createSingleFolder">
							</div>
							<div class="input_group">
								<p>Pad tracks</p>
								<input type="checkbox" v-model="settings.padTracks">
							</div>
							<div class="input_group">
								<p>Overwrite padding size</p>
								<input type="number" v-model="settings.paddingSize">
							</div>
							<div class="input_group">
								<p>Illegal Character replacer</p>
								<input type="text" v-model="settings.illegalCharacterReplacer">
							</div>
							<div class="input_group">
								<p>Concurrent Downloads</p>
								<input type="number" v-model.number="settings.queueConcurrency">
							</div>
							<div class="input_group">
								<p>Preferred Bitrate</p>
								<select v-model="settings.maxBitrate">
									<option value="9">FLAC 1411kbps</option>
									<option value="3">MP3 320kbps</option>
									<option value="1">MP3 128kbps</option>
								</select>
							</div>
							<div class="input_group">
								<p>Bitrate fallback</p>
								<input type="checkbox" v-model="settings.fallbackBitrate">
							</div>
							<div class="input_group">
								<p>Search fallback</p>
								<input type="checkbox" v-model="settings.fallbackSearch">
							</div>
							<div class="input_group">
								<p>Create log file for errors</p>
								<input type="checkbox" v-model="settings.logErrors">
							</div>
							<div class="input_group">
								<p>Create log file for searched tracks</p>
								<input type="checkbox" v-model="settings.logSearched">
							</div>
							<div class="input_group">
								<p>Create playlist file</p>
								<input type="checkbox" v-model="settings.createM3U8File">
							</div>
							<div class="input_group">
								<p>Create .lyr files (Sync Lyrics)</p>
								<input type="checkbox" v-model="settings.syncedLyrics">
							</div>
							<div class="input_group">
								<p>Save covers</p>
								<input type="checkbox" v-model="settings.saveArtwork">
							</div>
							<div class="input_group">
								<p>Cover name template</p>
								<input type="text" v-model="settings.coverImageTemplate">
							</div>
							<div class="input_group">
								<p>Save artist image</p>
								<input type="checkbox" v-model="settings.saveArtworkArtist">
							</div>
							<div class="input_group">
								<p>Artist image name template</p>
								<input type="text" v-model="settings.artistImageTemplate">
							</div>
							<div class="input_group">
								<p>Local artwork size</p>
								<input type="number" min="100" max="1800" step="100" v-model.number="settings.localArtworkSize">
							</div>
							<div class="input_group">
								<p>Embedded artwork size</p>
								<input type="number" min="100" max="1800" step="100" v-model.number="settings.embeddedArtworkSize">
							</div>
							<div class="input_group">
								<p>Save images as png</p>
								<input type="checkbox" v-model="settings.PNGcovers">
							</div>
							<div class="input_group">
								<p>Save playlists as compilation</p>
								<input type="checkbox" v-model="settings.savePlaylistAsCompilation">
							</div>
							<div class="input_group">
								<p>Remove album version from track title</p>
								<input type="checkbox" v-model="settings.removeAlbumVersion">
							</div>
							<div class="input_group">
								<p>What should I do with featured artists</p>
								<select v-model="settings.featuredToTitle">
									<option value="0">Nothing</option>
									<option value="1">Remove it from the title</option>
									<option value="2">Move it to the title</option>
								</select>
							</div>
							<div class="input_group">
								<p>Title casing</p>
								<select v-model="settings.titleCasing">
									<option value="nothing">Keep unchanged</option>
									<option value="lower">lowercase</option>
									<option value="upper">UPPERCASE</option>
									<option value="start">Start Of Each Word</option>
									<option value="sentence">Like a sentence</option>
								</select>
							</div>
							<div class="input_group">
								<p>Artist casing</p>
								<select v-model="settings.artistCasing">
									<option value="nothing">Keep unchanged</option>
									<option value="lower">lowercase</option>
									<option value="upper">UPPERCASE</option>
									<option value="start">Start Of Each Word</option>
									<option value="sentence">Like a sentence</option>
								</select>
							</div>
						</div>
						<footer>
							<button onclick="saveSettings()">Save</button>
						</footer>
					</div>

					<div id="about_tab" class="main_tabcontent"><h1>About</h1></div>

				</div></section>
			</div>

			<div id="download_tab_container">
				<div id="download_tab_bar">
					<i id="show_download_tab" class="material-icons download_bar_icon">chevron_left</i>
					<label>downloads</label>
				</div>
				<div id="download_tab">
					<i id="hide_download_tab" class="material-icons download_bar_icon">chevron_right</i>
					<div class="inline-flex right">
						<i id="clean_queue" class="material-icons download_bar_icon">clear_all</i>
						<i id="cancel_queue" class="material-icons download_bar_icon">delete_sweep</i>
					</div>
					<div id="download_list" class=""></div>
				</div>
			</div>

		</main>
	</body>
	<script type="text/javascript" src="/public/js/socket.io.js"></script>
	<script type="text/javascript" src="/public/js/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="/public/js/vue.min.js"></script>
	<script type="text/javascript" src="/public/js/toastify.js"></script>
	<script type="text/javascript" src="/public/js/app/app.js"></script>
	<script type="text/javascript" src="/public/js/app/utils.js"></script>
	<script type="text/javascript" src="/public/js/app/search.js"></script>
	<script type="text/javascript" src="/public/js/app/downloadList.js"></script>
</html>
